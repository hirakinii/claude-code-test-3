

# **仕様書作成支援アプリ ユーザーストーリーに基づくシーケンス図**

本ドキュメントは、ご提供いただいた「ユーザーストーリー分析」 1、「要件定義書」 2、および「データモデル生成」 3 に基づき、各ユーザーストーリーのプロセスフローを網羅的に定義するシーケンス図を提供します。

## **序論：設計の前提と参加者**

全てのシーケンス図は、ご提供いただいた資料、特に「データモデル生成」 3 に記載されている**メタモデル・アーキテクチャ**を前提として構築されています。このアーキテクチャは、システムの柔軟性の核となります。

* **スキーマ（定義）層:** 管理者（Admin）が編集する、ウィザードの「型」や「テンプレート」です。(Schema, Schema\_Category, Schema\_Field テーブル群) 3  
* **インスタンス（データ）層:** 作成者（Creator）が入力する、個々の仕様書の「値」です。(Specification, Specification\_Content テーブル群) 3

この設計思想に基づき、シーケンス図では以下の参加者を定義します。

コード スニペット

sequenceDiagram  
    participant Creator as 仕様書作成者  
    participant Admin as 仕様書管理者  
    participant Frontend as フロントエンド (ブラウザ)  
    participant LocalStorage as ローカルストレージ  
    participant Backend as バックエンドAPI  
    participant db(Schema) as DB (スキーマ層)  
    participant db(Instance) as DB (インスタンス層)

---

## **第1部：仕様書管理（ダッシュボード）のシーケンス**

トップページにおける仕様書の一覧表示、新規作成、およびナビゲーションに関するプロセスフローです。

### **1.1 ユーザーストーリー：仕様書一覧の表示**

ユーザーがダッシュボードにアクセスし、自身に関連する仕様書の一覧を高速に取得するプロセスです 1。

設計上の考慮事項:  
データモデル 3 に基づき、一覧表示のパフォーマンスを最適化するため、Specification テーブルに非正規化された title カラムが存在します。本シーケンスは、EAVテーブル (Specification\_Content) への高コストなJOINを避け、Specification テーブルのみをクエリします 3。

コード スニペット

sequenceDiagram  
    participant Creator as 仕様書作成者  
    participant Frontend as フロントエンド  
    participant Backend as バックエンドAPI  
    participant db(Instance) as DB (インスタンス層)

    Creator-\>\>Frontend: トップページ(ダッシュボード)にアクセス  
    activate Frontend  
    Frontend-\>\>Backend: GET /api/specifications (仕様書一覧取得)  
    activate Backend  
    Backend-\>\>db(Instance): SELECT id, title, status, version, updated\_at FROM Specification WHERE author\_user\_id \=  
    note right of Backend: \[3.4\]: 高速化のため非正規化された 'title' カラムのみ参照  
    db(Instance)--\>\>Backend: 仕様書リスト (titleがNULLの場合「(件名未設定)」 )  
    Backend--\>\>Frontend: 200 OK (仕様書リストJSON)  
    deactivate Backend  
      
    note right of Frontend: : ステータスに基づきバッジの色を変更  
    note right of Frontend: : ステータスに基づき「編集」/「詳細」ボタンを振り分け  
      
    Frontend-\>\>Creator: 仕様書一覧を表示 (件名, ステータス, バージョン)  
    deactivate Frontend

### **1.2 ユーザーストーリー：新規仕様書の開始**

ユーザーが「+ 新規作成」ボタンを押し、ウィザードのステップ1に遷移するプロセスです 1。

設計上の考慮事項:  
非機能要件「入力データの自動保存」 2 を実現するため、ローカルストレージにデータを紐づけるための一意なID (specification\_id) が必要です。このため、ボタンクリック時に即座にサーバーと通信し、データベースに最小限の「シェル」レコードを作成してIDを取得します 3。

コード スニペット

sequenceDiagram  
    participant Creator as 仕様書作成者  
    participant Frontend as フロントエンド  
    participant Backend as バックエンドAPI  
    participant db(Instance) as DB (インスタンス層)

    Creator-\>\>Frontend: 「+ 新規作成」ボタンをクリック   
    activate Frontend  
    Frontend-\>\>Backend: POST /api/specifications (新規シェル作成要求)  
    activate Backend  
    note right of Backend: \[採番\], \[UX最適化\]: 即時採番とStep1への遷移  
    Backend-\>\>db(Instance): INSERT INTO Specification (author\_user\_id, status, version, schema\_id) VALUES (, '編集中', '0.1',)  
    db(Instance)--\>\>Backend: new {specification\_id}  
    Backend--\>\>Frontend: 201 Created (new {specification\_id})  
    deactivate Backend  
      
    note right of Frontend: \[要件41\]: 保存前のローカルデータをクリア  
    Frontend-\>\>LocalStorage: removeItem('wizard\_data\_' \+ {id}) (古いデータがあればクリア)  
    Frontend-\>\>Frontend: ローカル状態(state)を初期化  
    Frontend-\>\>Creator: ウィザード画面に遷移 (/wizard/{id}/step1)   
    deactivate Frontend

### **1.3 ユーザーストーリー：編集へのシームレスな移行**

一覧画面で「編集中」または「確認中」の仕様書の「編集」ボタンを押し、ウィザードを再開するプロセスです 1。

設計上の考慮事項:  
この操作は「作業のシームレスな再開」（第6.2部）のシーケンスをトリガーします。ここではナビゲーションのみを図示し、データの復元は6.2で詳述します 2。

コード スニペット

sequenceDiagram  
    participant Creator as 仕様書作成者  
    participant Frontend as フロントエンド

    Creator-\>\>Frontend: 「編集」ボタンをクリック (対象: {id})   
    activate Frontend  
    note right of Frontend: \[要件18\]: 「編集」ボタンからのウィザード再開  
    Frontend-\>\>Creator: ウィザード画面に遷移 (/wizard/{id})  
    deactivate Frontend  
      
    note over Creator, Frontend: この直後、第6.2部「作業のシームレスな再開」シーケンスが実行される

### **1.4 ユーザーストーリー：設定画面へのナビゲーション**

「仕様書管理者」ロールを持つユーザーが「設定」ボタンを押し、スキーマ設定画面に遷移するプロセスです 1。

コード スニペット

sequenceDiagram  
    participant Admin as 仕様書管理者  
    participant Frontend as フロントエンド  
    participant Backend as バックエンドAPI

    Admin-\>\>Frontend: 「設定」ボタンをクリック   
    activate Frontend  
    note left of Admin: ユーザーは「管理者」ロールを持つ   
      
    alt フロントエンドでロールを検証  
        Frontend-\>\>Frontend: ユーザーロールを検証 (is\_admin \== true)  
        Frontend-\>\>Creator: スキーマ設定画面に遷移 (/settings)  
    else バックエンドでロールを検証 (オプション)  
        Frontend-\>\>Backend: GET /settings (ページ遷移要求)  
        activate Backend  
        Backend--\>\>Frontend: 200 OK (管理者ロールを確認)  
        deactivate Backend  
        Frontend-\>\>Creator: スキーマ設定画面に遷移 (/settings)  
    end  
    deactivate Frontend

---

## **第2部：仕様書作成（ウィザード Steps 1-5）のシーケンス**

ウィザード画面での動的なフォーム生成と、ローカルストレージへのデータ一時保存に関するプロセスフローです。

### **2.1 ユーザーストーリー：ウィザードによる構造化入力（動的フォーム生成）**

ウィザード画面がロードされた際、DBのSchema定義を読み込み、UI（ステップ、進捗バー、入力フォーム）を動的に構築するプロセスです 1。

設計上の考慮事項:  
これは「メタモデル・アーキテクチャ」 3 の中核的な具現化です。UIはハードコードされておらず、db(Schema) から取得した定義に基づいてレンダリングされます 3。

コード スニペット

sequenceDiagram  
    participant Creator as 仕様書作成者  
    participant Frontend as フロントエンド  
    participant Backend as バックエンドAPI  
    participant db(Schema) as DB (スキーマ層)

    Creator-\>\>Frontend: ウィザード画面にアクセス (/wizard/{id})  
    activate Frontend  
      
    note over Frontend, Backend: ※第6.2部のローカルストレージ復元と並行実行  
      
    Frontend-\>\>Backend: GET /api/schema/ (動的フォーム定義の要求)  
    activate Backend  
    Backend-\>\>db(Schema): SELECT \* FROM Schema\_Category c JOIN Schema\_Field f ON c.category\_id \= f.category\_id WHERE... ORDER BY c.display\_order, f.display\_order  
    db(Schema)--\>\>Backend: スキーマ定義 (JSON)  
    Backend--\>\>Frontend: 200 OK (スキーマJSON)  
    deactivate Backend  
      
    Frontend-\>\>Frontend: スキーマJSONをstateに保存  
    Frontend-\>\>Frontend: スキーマに基づきUIを動的構築 (進捗バー、フォーム項目)   
    Frontend-\>\>Creator: ウィザード画面を表示  
    deactivate Frontend

### **2.2 ユーザーストーリー：基本情報の入力（自動保存）**

「件名」や「調達の目的」など、EAVパターンで保存される単純なフィールドに入力するプロセスです 1。

設計上の考慮事項:  
非機能要件「入力データの自動保存」 2 に基づき、この操作はバックエンドAPIを呼び出しません。入力データは即座にローカルストレージに書き込まれます。

コード スニペット

sequenceDiagram  
    participant Creator as 仕様書作成者  
    participant Frontend as フロントエンド  
    participant LocalStorage as ローカルストレージ

    Creator-\>\>Frontend: フォーム入力 (例: 「件名」にテキスト入力)   
    activate Frontend  
    Frontend-\>\>Frontend: 内部状態(state)を更新  
    note right of Frontend: debounce処理 (例: 500ms)  
    Frontend-\>\>LocalStorage: setItem('wizard\_data\_' \+ {id},)   
    LocalStorage--\>\>Frontend: 保存完了  
    Frontend-\>\>Creator: 「自動保存中」インジケータ表示   
    deactivate Frontend  
end

### **2.3 ユーザーストーリー：\[1対多\] リスト項目（納品物など）の追加**

「+ 納品物を追加」ボタンを押し、動的にフォームブロックを追加するプロセスです 1。

設計上の考慮事項:  
これも「自動保存」要件 2 の対象です。データモデル 3 上は独立した Deliverable テーブルですが、入力段階ではローカルストレージ上の配列（state）を変更するのみです。データベースへの実際の INSERT は第3.5部（最終保存）まで遅延されます。

コード スニペット

sequenceDiagram  
    participant Creator as 仕様書作成者  
    participant Frontend as フロントエンド  
    participant LocalStorage as ローカルストレージ

    Creator-\>\>Frontend: 「+ 納品物を追加」ボタンをクリック   
    activate Frontend  
    Frontend-\>\>Frontend: state内の 'deliverables' 配列に空のオブジェクトを追加   
    Frontend-\>\>Frontend: UIを再レンダリング (新しい入力ブロック表示)  
      
    note right of Frontend: この変更は次の自動保存シーケンス(2.2)でLocalStorageに書き込まれる  
      
    deactivate Frontend

---

## **第3部：レビュー、バリデーション、保存（ウィザード Step 6）のシーケンス**

ウィザードの最終ステップ（確認・保存）に関するプロセスフローです。

### **3.1 ユーザーストーリー：最終確認サマリーの表示と入力漏れの検知**

Step 6の確認画面表示時に、ローカルデータをスキーマ定義と照合し、必須項目の入力漏れを視覚的に強調表示するプロセスです 1。

コード スニペット

sequenceDiagram  
    participant Creator as 仕様書作成者  
    participant Frontend as フロントエンド

    Creator-\>\>Frontend: 「次へ」をクリックし、Step 6(確認画面)へ遷移  
    activate Frontend  
      
    note right of Frontend: stateはスキーマ定義(2.1)と入力データ(2.2)の両方を保持している  
    Frontend-\>\>Frontend: state内のスキーマ定義とローカルデータを比較・検証  
    loop 各スキーマフィールド (Schema\_Field)  
        alt 必須項目(field.is\_required \== true) かつ データ未入力   
            Frontend-\>\>Frontend: 当該項目に「強調表示(赤背景)」フラグを立てる   
        end  
    end  
      
    note right of Frontend: : 進捗バーにも入力状況 (例: (0/3)) を表示  
    Frontend-\>\>Creator: 全入力項目を読み取り専用で表示 (未入力項目は強調表示)   
    deactivate Frontend

### **3.2 ユーザーストーリー：編集のためのクイックナビゲーション**

Step 6のサマリー画面のセクション横にある「編集」ボタンから、該当の入力ステップ（例：Step 1）に直接ジャンプするプロセスです 1。

コード スニペット

sequenceDiagram  
    participant Creator as 仕様書作成者  
    participant Frontend as フロントエンド

    Creator-\>\>Frontend: Step 6で「基本情報」セクションの「編集」ボタンをクリック   
    activate Frontend  
    Frontend-\>\>Creator: Step 1 の画面に遷移 (/wizard/{id}/step1)  
    deactivate Frontend

### **3.3 ユーザーストーリー：仕様書の保存（ドラフト / 公式版）**

「仕様書を保存する」ボタンが押され、ローカルストレージの全データがデータベースに永続化されるプロセスです 1。

設計上の考慮事項:  
これはシステム全体で最も重要なトランザクションです。

1. **バリデーション:** バックエンドは、ペイロードと db(Schema) の is\_required フラグを突合し、メジャー保存かマイナー保存かを決定します 2。  
2. **デノーマライゼーション:** Specification.title カラムをここで更新します 3。  
3. **EAV保存:** Specification\_Content テーブルにデータを保存します 3。  
4. **1:N保存:** Deliverable, Business\_Task 等の独立テーブルにデータを保存します 3。  
5. **クリーンアップ:** LocalStorage の一時データを削除します 2。

コード スニペット

sequenceDiagram  
    participant Creator as 仕様書作成者  
    participant Frontend as フロントエンド  
    participant LocalStorage as ローカルストレージ  
    participant Backend as バックエンドAPI  
    participant db(Schema) as DB (スキーマ層)  
    participant db(Instance) as DB (インスタンス層)

    Creator-\>\>Frontend: 「仕様書を保存する」ボタンをクリック   
    activate Frontend  
    Frontend-\>\>LocalStorage: getItem('wizard\_data\_' \+ {id})  
    LocalStorage--\>\>Frontend: 最終データ(Payload JSON)  
    Frontend-\>\>Backend: PUT /api/specifications/{id} (Payload JSON)  
    deactivate Frontend  
    activate Backend  
      
    note right of Backend: 1\. 保存ロジックの決定   
    Backend-\>\>db(Schema): SELECT field\_id, is\_required FROM Schema\_Field WHERE schema\_id \=...  
    db(Schema)--\>\>Backend: 必須項目リスト  
    Backend-\>\>Backend: Payloadと必須項目リストを検証  
      
    alt 必須項目が全て入力済み (公式版の確定)   
        Backend-\>\>Backend: version \= '2.0' (メジャー更新), status \= '保存済み'  
    else 必須項目に未入力あり (ドラフト保存)   
        Backend-\>\>Backend: version \= '1.2' (マイナー更新), status \= '編集中'  
    end  
      
    Backend-\>\>db(Instance): BEGIN TRANSACTION  
    activate db(Instance)  
      
    note right of Backend: 2\. マスターテーブル更新 (非正規化 'title' 含む)   
    Backend-\>\>db(Instance): UPDATE Specification SET version \= \[version\], status \= \[status\], title \= \[Payload.title\] WHERE id \= {id}  
      
    note right of Backend: 3\. EAVデータ(Content)の保存   
    Backend-\>\>db(Instance): DELETE FROM Specification\_Content WHERE specification\_id \= {id}  
    loop Payload内のEAVデータ (件名, 目的など)  
        Backend-\>\>db(Instance): INSERT INTO Specification\_Content (spec\_id, field\_id, value) VALUES (...)  
    end  
      
    note right of Backend: 4\. 1:Nサブエンティティ(納品物)の保存   
    Backend-\>\>db(Instance): DELETE FROM Deliverable WHERE specification\_id \= {id}  
    loop Payload内の'deliverables'配列  
        Backend-\>\>db(Instance): INSERT INTO Deliverable (spec\_id, name, quantity,...) VALUES (...)  
    end

    note right of Backend: 4\. 1:Nサブエンティティ(業務タスクなど)も同様に保存   
    Backend-\>\>db(Instance): DELETE FROM Business\_Task WHERE specification\_id \= {id}  
    loop Payload内の'business\_tasks'配列  
        Backend-\>\>db(Instance): INSERT INTO Business\_Task (spec\_id, title, detailed\_spec) VALUES (...)  
    end  
      
    Backend-\>\>db(Instance): COMMIT TRANSACTION  
    deactivate db(Instance)  
    Backend--\>\>Frontend: 200 OK (保存成功)  
    deactivate Backend  
      
    activate Frontend  
    note right of Frontend: 5\. ローカルのドラフトをクリア   
    Frontend-\>\>LocalStorage: removeItem('wizard\_data\_' \+ {id})  
    Frontend-\>\>Creator: トップページに遷移 (/dashboard)  
    deactivate Frontend

---

## **第4部：仕様書の利用（詳細・エクスポート）のシーケンス**

「保存済み」の仕様書を参照し、外部ファイル形式でダウンロードするプロセスフローです。

### **4.1 ユーザーストーリー：仕様書概要のクイック確認**

「詳細」ボタンから仕様書詳細画面にアクセスし、全ての入力内容（メタデータ、EAV、1:Nリスト）を集約して表示するプロセスです 1。

コード スニペット

sequenceDiagram  
    participant Creator as 仕様書作成者  
    participant Frontend as フロントエンド  
    participant Backend as バックエンドAPI  
    participant db(Instance) as DB (インスタンス層)

    Creator-\>\>Frontend: 詳細画面にアクセス (/details/{id})  
    activate Frontend  
    Frontend-\>\>Backend: GET /api/specifications/{id}/details  
    activate Backend  
      
    note right of Backend: マスターレコード取得   
    Backend-\>\>db(Instance): SELECT \* FROM Specification WHERE id \= {id}  
      
    note right of Backend: EAVデータ取得   
    Backend-\>\>db(Instance): SELECT \* FROM Specification\_Content WHERE specification\_id \= {id}  
      
    note right of Backend: 1:Nサブエンティティ取得 (納品物, 業務タスクなど)   
    Backend-\>\>db(Instance): SELECT \* FROM Deliverable WHERE specification\_id \= {id}  
    Backend-\>\>db(Instance): SELECT \* FROM Business\_Task WHERE specification\_id \= {id}  
      
    db(Instance)--\>\>Backend: (全データ)  
    Backend-\>\>Backend: 全データを単一のJSONに集約  
    Backend--\>\>Frontend: 200 OK (詳細JSON)  
    deactivate Backend  
    Frontend-\>\>Creator: 仕様書詳細情報を表示 (概要, 納品物リスト, 業務タスクリスト等)  
    deactivate Frontend

### **4.2 ユーザーストーリー：PDF / Word / Markdown形式でのエクスポート**

詳細画面の「PDF」等のボタンが押され、サーバーサイドでファイルが生成・ダウンロードされるプロセスです 1。

コード スニペット

sequenceDiagram  
    participant Creator as 仕様書作成者  
    participant Frontend as フロントエンド  
    participant Backend as バックエンドAPI  
    participant db(Instance) as DB (インスタンス層)

    Creator-\>\>Frontend: 「PDFエクスポート」ボタンをクリック   
    activate Frontend  
    Frontend-\>\>Backend: GET /api/specifications/{id}/export?format=pdf  
    activate Backend  
      
    note right of Backend: 4.1と同様に全データをDBから集約   
    Backend-\>\>db(Instance): (Specification, Content, Deliverable,... を全てクエリ)  
    db(Instance)--\>\>Backend: (全データ)  
      
    Backend-\>\>Backend: サーバーサイドでPDFファイルを生成   
    Backend--\>\>Frontend: 200 OK (Content-Type: application/pdf)  
    deactivate Backend  
    Frontend-\>\>Creator: ブラウザがPDFダウンロードを開始  
    deactivate Frontend

---

## **第5部：システム管理（スキーマ設定）のシーケンス**

「仕様書管理者」がウィザードのテンプレート（スキーマ）を編集するプロセスフローです 1。

### **5.1 ユーザーストーリー：入力項目の管理（追加・編集・削除）**

管理者が「設定」画面で、ウィザードのステップ内に新しい入力項目（例：「担当者」）を追加するプロセスです 1。

設計上の考慮事項:  
この操作は「インスタンス（データ）層」には一切影響を与えず、「スキーマ（定義）層」の Schema\_Field テーブルのみを変更します 3。

コード スニペット

sequenceDiagram  
    participant Admin as 仕様書管理者  
    participant Frontend as フロントエンド  
    participant Backend as バックエンドAPI  
    participant db(Schema) as DB (スキーマ層)

    Admin-\>\>Frontend: 設定画面で「+ 項目を追加」をクリック   
    activate Frontend  
    Frontend-\>\>Frontend: 項目定義モーダル表示 (項目名, データ型, 必須フラグ)  
    Admin-\>\>Frontend: フォーム入力 (例: '担当者', 'テキスト', '必須=true')   
    Frontend-\>\>Backend: POST /api/schema/fields (Payload JSON)  
    activate Backend  
    Backend-\>\>db(Schema): INSERT INTO Schema\_Field (category\_id, field\_name, data\_type, is\_required) VALUES (...)   
    db(Schema)--\>\>Backend: 挿入成功  
    Backend--\>\>Frontend: 201 Created (新フィールド情報)  
    deactivate Backend  
    Frontend-\>\>Admin: 設定画面のリストを更新  
    deactivate Frontend

### **5.2 ユーザーストーリー：設定のデフォルト復元**

管理者がスキーマ設定をカスタマイズ前の初期状態にリセットするプロセスです 1。

コード スニペット

sequenceDiagram  
    participant Admin as 仕様書管理者  
    participant Frontend as フロントエンド  
    participant Backend as バックエンドAPI  
    participant db(Schema) as DB (スキーマ層)

    Admin-\>\>Frontend: 「デフォルトに戻す」ボタンをクリック   
    activate Frontend  
    Frontend-\>\>Frontend: 確認ダイアログ表示「本当にリセットしますか？」  
    Admin-\>\>Frontend: 「OK」をクリック  
    Frontend-\>\>Backend: POST /api/schema/reset  
    activate Backend  
    Backend-\>\>db(Schema): BEGIN TRANSACTION  
    activate db(Schema)  
    Backend-\>\>db(Schema): DELETE FROM Schema\_Field WHERE schema\_id \=  
    Backend-\>\>db(Schema): DELETE FROM Schema\_Category WHERE schema\_id \=  
    Backend-\>\>db(Schema): (システム定義のデフォルトスキーマをINSERT)  
    Backend-\>\>db(Schema): COMMIT TRANSACTION  
    deactivate db(Schema)  
    Backend--\>\>Frontend: 200 OK (リセット完了)  
    deactivate Backend  
    Frontend-\>\>Admin: 設定画面をリロード  
    deactivate Frontend

---

## **第6部：非機能要件・ユーザビリティのシーケンス**

ウィザードのユーザビリティを支える、ローカルストレージを利用した中核的なプロセスフローです 1。

### **6.1 ユーザーストーリー：データ消失の防止（自動保存）**

ユーザーがウィザードで入力を行うたびに、データがローカルストレージに保存されるプロセスです 2。

コード スニペット

sequenceDiagram  
    participant Creator as 仕様書作成者  
    participant Frontend as フロントエンド  
    participant LocalStorage as ローカルストレージ

    Creator-\>\>Frontend: フォーム入力 (例: 「件名」にテキスト入力)   
    activate Frontend  
    Frontend-\>\>Frontend: 内部状態(state)を更新  
    note right of Frontend: debounce/throttleタイマー（例: 500ms）が作動  
    Frontend-\>\>LocalStorage: setItem('wizard\_data\_' \+ {id},)   
    LocalStorage--\>\>Frontend: 保存完了  
    Frontend-\>\>Creator: 「自動保存中」インジケータ表示   
    deactivate Frontend

### **6.2 ユーザーストーリー：作業のシームレスな再開**

ユーザーが「編集中」の仕様書を開いた際（またはページリロード時）、ローカルストレージからデータが復元されるプロセスです 2。

コード スニペット

sequenceDiagram  
    participant Creator as 仕様書作成者  
    participant Frontend as フロントエンド  
    participant LocalStorage as ローカルストレージ  
    participant Backend as バックエンドAPI  
    participant db(Schema) as DB (スキーマ層)

    Creator-\>\>Frontend: ウィザード画面にアクセス (例: /wizard/{id})   
    activate Frontend  
      
    par スキーマ定義の取得 (第2.1部)  
        Frontend-\>\>Backend: GET /api/schema/  
        activate Backend  
        Backend-\>\>db(Schema): (スキーマ定義をクエリ)  
        db(Schema)--\>\>Backend: スキーマ定義 (JSON)  
        Backend--\>\>Frontend: 200 OK (スキーマJSON)  
        deactivate Backend  
        Frontend-\>\>Frontend: スキーマをstateに保存  
    and 自動保存データの復元 (\[非機能要件\])  
        Frontend-\>\>LocalStorage: getItem('wizard\_data\_' \+ {id})  
        LocalStorage--\>\>Frontend: 保存済みデータ (JSON) または null  
        Frontend-\>\>Frontend: データをstateに復元  
    end  
      
    Frontend-\>\>Frontend: スキーマとデータをマージしてUIを動的構築  
    Frontend-\>\>Creator: データが復元されたウィザード画面を表示 (前回終了時のステップ)  
    deactivate Frontend

#### **引用文献**

1. 仕様書作成支援アプリ\_ユーザーストーリー分析  
2. 仕様書作成支援アプリ\_要件定義書  
3. 仕様書作成アプリ データモデル生成